<div class="bg-[#1a1627] p-6 rounded-xl shadow-lg hover:shadow-purple-500/20 transition-all duration-300 hover:scale-[1.03] relative min-h-[220px] group border border-white/5"
     (dblclick)="edit.emit(challenge)"
     (contextmenu)="delete.emit({event: $event, challenge: challenge})">

  <span class="badge text-xs sm:text-sm px-4 py-1.5 shadow-xl" [ngStyle]="getCategoryStyle(challenge.category)">
    {{ challenge.category }}
  </span>

  <h4 class="font-bold text-xl mb-2 text-white group-hover:text-purple-400 transition-colors">{{ challenge.title }}</h4>
  <p class="text-gray-400 mb-14 text-sm line-clamp-3">{{ challenge.description }}</p>

  <div class="absolute bottom-4 left-6 right-4 flex justify-between items-center">
    <span class="text-xs text-gray-500 italic truncate max-w-[80px]">by {{ challenge.createdBy }}</span>

    <div class="flex items-center gap-2">
      <div class="text-sm font-semibold bg-gradient-to-r from-purple-400 to-blue-500 text-white px-3 py-1.5 rounded-full shadow-md">
        {{ challenge.points }} pts
      </div>

      <button *ngIf="!status" (click)="start.emit(challenge); $event.stopPropagation()"
              class="px-4 py-1.5 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold text-sm cursor-pointer hover:brightness-110 hover:scale-105 transition-all shadow-lg shadow-green-900/20">
        Start ğŸš€
      </button>

      <div *ngIf="['PENDING', 'RECEIVED', 'ACCEPTED'].includes(status || '')"
           class="px-3 py-1.5 text-xs text-purple-200 font-bold border border-purple-500/50 rounded-full bg-purple-900/40 backdrop-blur-sm">
        <span class="animate-pulse text-purple-400">â—</span> Active
      </div>

      <div *ngIf="status === 'COMPLETED'" class="flex items-center gap-2">
        <div class="px-3 py-1.5 text-xs text-yellow-300 font-bold border border-yellow-500/50 rounded-full bg-yellow-900/20">
          <lucide-icon [img]="icons.CheckCircle" class="w-3 h-3 inline mr-1"></lucide-icon> Done
        </div>
        <button (click)="restart.emit(challenge); $event.stopPropagation()"
                class="p-1.5 rounded-full bg-gray-800 border border-gray-600 hover:bg-gray-700 transition-colors">
          <lucide-icon [img]="icons.RotateCcw" class="w-4 h-4 text-gray-300"></lucide-icon>
        </button>
      </div>

      <button (click)="assign.emit(challenge); $event.stopPropagation()"
              class="p-2 rounded-full bg-gray-800 text-purple-400 hover:bg-purple-500 hover:text-white transition-all shadow-md group/btn">
        <span class="text-lg group-hover/btn:rotate-12 block">âœˆï¸</span>
      </button>
    </div>
  </div>
</div>
